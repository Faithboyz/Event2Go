<!DOCTYPE html>
<html ng-app id="ng-app">
<head>
  <title>E2G-profile</title>
  <link rel="stylesheet" href="css/slideMenu.css"/>
</head>
<!-- Set the controller for the view -->
<body ng-controller="EventCtrl">
  <!-- top toolbar setup -->
  <div class="toolbar">
    <div class="toolbar__left">
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;
          </span>
    </div>

    <div class="toolbar__center">
      My events
    </div>
    <!-- creat a new event -->
    <div class="toolbar__right">
      <span class="toolbar-button toolbar-button--outline" ng-click="Createform()">+ Event</span>
    </div>
  </div>
  <!-- loadder animation -->
  <div ng-if="showLoad">
    <div class="spinner">
      <div class="rect1"></div>
      <div class="rect2"></div>
      <div class="rect3"></div>
      <div class="rect4"></div>
      <div class="rect5"></div>
    </div>
  </div>
  <br/>
  <!-- Show events created by the user -->
  <div ng-if="showList">
    <div ng-repeat="event in events">
      <div ng-if="event.email==username" >
       <ons-list-header class="list-item__title" >{{event.event}}</ons-list-header>
        <ons-list-item style="  background-color: lightgrey; " modifier="nodivider">
        <div class="left">
         <img class="list-item__thumbnail" src="https://placekitten.com/g/40/40">
        </div>
        <div class="center">
          <span class="list-item__subtitle">Description: {{event.description}}</span>
          <span class="list-item__subtitle">Date: {{event.date | date:'dd-MM-yyyy'}}</span>
          <span class="list-item__subtitle">Location: {{event.Location}}</span>
          <span class="list-item__subtitle">Time: {{event.date | date:'HH:mm a'}}</span>
        </div>
        <div class="right">
          <ons-button type="submit" class="button--outline" ng-click="editEvent(event.$id)" >Edit</ons-button>&nbsp;
          <ons-button type="button" class="button--outline" ng-click="deleteEvent(event.$id)">Delete</ons-button>
          <br/>
        </div>
        </ons-list-item><br/>
      </div>
    </div>
  </div>

  <!-- Show the create event form -->
  <div ng-if="showCreate">
    <div class="col-sm-10 offset-sm-1 text-center">
      <br /><br />
      <form role="form" class="form" name="eventForm" novalidate="">
        <div ng-class="{'has-error': eventForm.event.$invalid && eventForm.event.$touched}">
          <div>Event Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="text-input text-input--material" type="name" name="event" ng-model="user.event"  required=""></div>
          <small class="help-block" ng-show="eventForm.event.$invalid && eventForm.event.$touched">Please enter an Event name</small>
        </div>
          <br />
        <div ng-class="{'has-error': eventForm.Location.$invalid && eventForm.Location.$touched}">
          <div>Event Location:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="text-input text-input--material" type="text" name="Location" ng-model="user.Location"  required=""></div>
          <small class="help-block" ng-show="eventForm.Location.$invalid && eventForm.Location.$touched">Please enter an Event Location</small>
        </div>
          <br />
        <div ng-class="{'has-error': eventForm.date.$invalid && eventForm.date.$touched}">
          <div>Event Date(d-m-y):<input class="text-input text-input--material" type="datetime-local" name="date" ng-model="user.date"  required=""></div>
          <small class="help-block" ng-show="eventForm.date.$invalid && eventForm.date.$touched">Please enter an Event date</small>
        </div>
          <br />
        <div ng-class="{'has-error': eventForm.description.$invalid && eventForm.description.$touched}">
          <div>Event Description:&nbsp;&nbsp;<input class="text-input text-input--material" type="text" name="description" ng-model="user.description"  required=""></div>
          <small class="help-block" ng-show="eventForm.description.$invalid && eventForm.description.$touched">Please enter an Event description</small>
        </div>
          <br />
          <br />
          <a type="button"  name="cancel" class="button--large--cta"  ng-click="Cancel()">Cancel</a><br />
          <a type="button"  name="submit" class="button--large--cta"  ng-disabled="eventForm.$invalid" ng-click="Create()">Create</a>
      </form>
    </div>
  </div>
  <!-- Set and show the edit event form -->
  <div ng-if="showEdit">
    <div class="col-sm-10 offset-sm-1 text-center">
      <br /><br />
      <form role="form" class="form" name="editForm" novalidate="">
        <div ng-class="{'has-error': editForm.event.$invalid && editForm.event.$touched}">
          <div>Event Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="text-input text-input--material" type="name" name="event" ng-model="editPostData.event"  required=""></div>
          <small class="help-block" ng-show="editForm.event.$invalid && editForm.event.$touched">Please enter an Event name</small>
        </div>
          <br />
        <div ng-class="{'has-error': editForm.Location.$invalid && editForm.Location.$touched}">
          <div>Event Location:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="text-input text-input--material" type="text" name="Location" ng-model="editPostData.Location"  required=""></div>
          <small class="help-block" ng-show="editForm.Location.$invalid && editForm.Location.$touched">Please enter an Event Location</small>
        </div>
          <br />
        <div ng-class="{'has-error': editForm.date.$invalid && editForm.date.$touched}">
          <div>Event Date(d-m-y):<input class="text-input text-input--material" type="datetime-local" name="date" ng-model="editPostData.date" required=""></div>
          <small align="left" class="help-block" ng-show="editForm.date.$invalid && editForm.date.$touched">Please enter an Event date</small>
        </div>
          <br />
        <div ng-class="{'has-error': editForm.description.$invalid && editForm.description.$touched}">
          <div>Event Description:&nbsp;&nbsp;<input class="text-input text-input--material" type="text" name="description" ng-model="editPostData.description" required=""></div>
          <small class="help-block" ng-show="editForm.description.$invalid && editForm.description.$touched">Please enter an Event description</small>
        </div>
          <br />
          <br />
          <a type="button"  name="cancel" class="button--large--cta"  ng-click="Cancel()">Cancel</a><br />
          <a type="button"  name="submit" class="button--large--cta"  ng-disabled="editForm.$invalid" ng-click="Update(editPostData.$id)">Update</a>
      </form>
    </div>
  </div>

  <!-- slide menu, kept last so as to not show html link during site loadup -->
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="#!/welcome">Home</a>
    <a href="#!/account">Profile</a>
    <a href="#!/event">Events</a>
    <a href="#" ng-click="logout()">Logout</a>
  </div>
</body>
</html>
